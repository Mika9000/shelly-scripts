# Shelly scripts I use

These are Shelly scripts I've written to save energy and make life easier and more fun.

A more detailed description of what the scripts do and how they work and are configured can be found in the supplementary md files.

# Heater script

Shelly script pair to control an electric hot water heater in a solar panel equipped household.

But, in addition to merely switching the heating on when the sun shines, they do the following:

1. In the morning, the system wakes up, heating the water when the power generated by the solar panel system exceeds the power requirement of the heater. When the heater's thermostat opens or the allowed heating time has been used up, the heating is marked as finished and turns off for the rest of the day.
2. At noon (all times are configurable), if the heating is not yet ready, the solar power requirement is significantly reduced. Smaller expectation ensures that the solar energy cover at least hopefully a good part of the energy used by the water heater, even if the rest is consumed from the grid.
3. In the evening, if the heating is not ready, the script starts monitoring the electricity price and turns on the heating at the cheapest time. Price status is fetched from spot-hinta.fi
4. At night, just before the morning, if the heating was not completed because there weren't enough cheap hours or the price monitoring wasn't used, the heating is forced on until completed, regardless of the energy price.
5. Heating can be controlled manually: It can be paused, continued or put back to automatic by manipulating a key in the Shelly's KVS bank.

# Shelly Plug energy meter

Turns Shelly Plug into an energy meter. The color of the light indicates how much unused solar energy is available, which helps, for example, decide whether another home appliance can be turned on. If the energy reading the meter uses is net yield, it also warns of very high consumption.


